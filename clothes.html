<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shop Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@300..900&family=Permanent+Marker&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Cart Modal -->
<div class="cart-modal" id="cartModal" style="display:none; position: fixed; top: 70px; right: 40px; width: 350px; background: #fff; border-radius: 10px; box-shadow: 0 8px 32px rgba(0,0,0,0.2); z-index: 2000; padding: 20px;">
  <button class="closeCart" onclick="toggleCart()" style="float: right; cursor: pointer; color: #dc3545; font-size: 1.2rem; border: none; background: none;">&times;</button>
  <h5>Your Cart</h5>
  <ul class="cart-list" id="cartList" style="max-height: 200px; overflow-y: auto; margin-bottom: 10px;"></ul>
  <div class="mb-2">Total: $<span id="cartTotal">0</span></div>
  <button class="btn btn-success w-100" onclick="checkoutCart()">Checkout</button>
</div>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="https://cdn-icons-png.flaticon.com/512/891/891462.png" alt="Logo" width="40" height="40" class="me-2">
      <span>Denial's Shop</span>
    </a>
    <button class="navbar-toggler ms-3" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item"><a class="nav-link" hreindex.html">Home</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Event</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="food.html">Food</a></li>
            <li><a class="dropdown-item" href="#">Clothes</a></li>
            <li><a class="dropdown-item" href="shoe.html">Shoe</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="service.html">Contact</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Login</a></li>
       
        <li class="nav-item ms-3">
          <div class="shopping" style="position: relative; cursor: pointer;">
            <img src="https://cdn-icons-png.flaticon.com/512/263/263142.png" alt="Cart" width="40" height="40">
            <span class="quantity" style="position: absolute; top: -10px; right: -10px; background: #dc3545; color: #fff; border-radius: 50%; padding: 2px 8px; font-size: 14px;">0</span>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Carousel -->
<div id="Img" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active"><img src="img/shirtc1.jpg" class="d-block w-100 " alt="..."></div>
    <div class="carousel-item"><img src="img/shirtc2.jpg" class="d-block  w-100" alt="..."></div>
    <div class="carousel-item"><img src="img/shirtc3.jpg" class="d-block  w-100" alt="..."></div>
  </div>
</div>
<h1 class="text-primary fw-bold mb-3">Rainy Season Discount!<span class="fw-bold text-success">50% OFF</span></h1>
<!-- New Arrived -->
<div class="container mt-4">
  <h3>New Arrived</h3>
  <div class="row" id="newArrivedContainer">
   
  </div>
</div>

<!-- Most Liked -->
<div class="container mt-4">
  <h3>Most Liked</h3>
  <div class="row" id="mostLikedContainer">
 
  </div>
</div>

<div class="container mt-4">
  <h3>RegularProducts</h3>
  <div class="row" id="RegularProductsContainer">
    <!-- Dynamic content will be injected here by JavaScript -->
  </div>
</div>
<!-- Footer -->
<footer class="bg-light text-center p-3 mt-5">
  <p>Contact: 094XXXXXXX | <a href="#">Denial@gmail.com</a></p>
  <p>Follow us: 
    <a href="#"><i class="fa-brands fa-viber" style="color: #3400d1;"></i></a> 
    <a href="#"><i class="fa-brands fa-facebook"></i></a> 
    <a href="#"><i class="fa-brands fa-instagram" style="color: #e66565;"></i></a>
  </p>
  <p>&copy; 2025 Denial's Shop. All rights reserved.</p>
</footer>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <form>
        <div class="modal-header">
          <h5 class="modal-title">Login</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" id="username">
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password">
          </div>
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="rememberMe">
            <label class="form-check-label" for="rememberMe">Remember me</label>
          </div>
          <div class="mt-2"><a href="#">Forgot password?</a></div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Sign In</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  function orderItem(itemName) {
    alert("You ordered: " + itemName);
  }

  function renderProducts(list, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    list.forEach((product, idx) => {
      container.innerHTML += `
        <div class="col-md-3 card-hover">
          <div class="card position-relative">
            <img src="${product.image}" class="card-img-top" alt="${product.name}">
            <div class="card-body">
              <h5 class="card-title">${product.name}</h5>
              <p class="mb-2 fw-bold text-primary">$${product.price}</p>
              <button class="btn btn-outline-primary w-100" onclick="addToCart(${product.id})">Add to Cart</button>
            </div>
          </div>
        </div>
      `;
    });
  }

  
  const newArrivedProducts = [
    { id: 1, name: 'Cargo', price: 25000, image: 'img/shirtn1.jpg' },
    { id: 2, name: 'Style-pant', price: 55000, image: 'img/shirtn2.jpg' },
    { id: 3, name: 'Jacket', price: 50000, image: 'img/shirtn3.jpg' },
    { id: 4, name: 'Tee', price: 35000, image: 'img/shirtn4.jpg' }
  ];

  const mostLikedProducts = [
    { id: 5, name: 'Jacket', price: 75000, image: 'img/shirtm1.jpg' },
    { id: 6, name: 'T-Shirt', price: 30000, image: 'img/shirtm2.jpg' },
    { id: 7, name: 'Style-pant', price: 60000, image: 'img/shirtm3.jpg' },
    { id: 8, name: 'Jean', price: 40000, image: 'img/shirtm4.jpg' }
  ];
  const RegularProducts = [
    { id: 9, name: 'Shirt', price: 20, image: 'img/shirtr1.jpg' },
    { id: 10, name: 'Sweater', price: 25, image: 'img/shirtr2.jpg' },
    { id: 11, name: 'Polo-shirt', price: 30, image: 'img/shirtr3.jpg' },
    { id: 12, name: 'Gym-Tee', price: 35, image: 'img/shirtr4.jpg' }
  ];

  
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
  }

 
  window.onload = () => {
    renderProducts(newArrivedProducts, 'newArrivedContainer');
    renderProducts(mostLikedProducts, 'mostLikedContainer');
    renderProducts(RegularProducts, 'RegularProductsContainer');
    updateCartUI();
  };

  function addToCart(id) {
    const allProducts = [
      ...newArrivedProducts,
      ...mostLikedProducts,
      ...RegularProducts
    ];
    const product = allProducts.find(p => p.id === id);
    if (!product) return;
    const cartItem = cart.find(item => item.id === id  && item.name === product.name);
    if (cartItem) {
      cartItem.quantity += 1;
    } else {
      cart.push({ ...product, quantity: 1 });
    }
    saveCart();
    updateCartUI();
  }

  function updateCartUI() {
    const cartList = document.getElementById('cartList');
    const cartTotal = document.getElementById('cartTotal');
    const quantity = document.querySelector('.quantity');
    cartList.innerHTML = '';
    let total = 0, count = 0;
    cart.forEach((item, idx) => {
      total += item.price * item.quantity;
      count += item.quantity;
      cartList.innerHTML += `
        <li style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px solid #eee; padding-bottom: 5px;">
          <img src="${item.image}" alt="${item.name}" style="width: 40px; height: 40px; object-fit: cover; margin-right: 10px;">
          <span>${item.name}</span>
          <span>
            <button class="btn btn-sm btn-outline-secondary" onclick="changeQty(${item.id},-1)">-</button>
            <span class="count" style="margin: 0 8px; min-width: 20px; display: inline-block; text-align: center;">${item.quantity}</span>
            <button class="btn btn-sm btn-outline-secondary" onclick="changeQty(${item.id},1)">+</button>
          </span>
          <span>$${item.price * item.quantity}</span>
        </li>
      `;
    });
    cartTotal.textContent = total;
    quantity.textContent = count;
  }

  function changeQty(id, delta) {
    const idx = cart.findIndex(item => item.id === id);
    if (idx > -1) {
      cart[idx].quantity += delta;
      if (cart[idx].quantity <= 0) cart.splice(idx, 1);
      saveCart();
      updateCartUI();
    }
  }

  
  function toggleCart() {
    const modal = document.getElementById('cartModal');
    modal.style.display = (modal.style.display === 'block') ? 'none' : 'block';
  }
  document.querySelector('.shopping').onclick = toggleCart;

  
  document.addEventListener('click', function(e) {
    const cartModal = document.getElementById('cartModal');
    const shoppingIcon = document.querySelector('.shopping');
    if (
      cartModal.style.display === 'block' &&
      !cartModal.contains(e.target) &&
      !shoppingIcon.contains(e.target)
    ) {
      cartModal.style.display = 'none';
    }
  });

  function checkoutCart() {
    if (cart.length === 0) {
      alert('Your cart is empty!');
      return;
    }
    alert('Thank you for your purchase!');
    cart = [];
    saveCart();
    updateCartUI();
    toggleCart();
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
